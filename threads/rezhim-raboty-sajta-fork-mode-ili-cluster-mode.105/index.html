<!DOCTYPE html><html id="XF" lang="ru-RU" dir="LTR" data-app="public" data-template="thread_view" data-container-key="node-23" data-content-key="thread-105" data-logged-in="false" data-cookie-prefix="xf_" class="has-no-js template-thread_view" data-run-jobs=""><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	
	
	

	<title>Режим работы сайта. Fork mode или cluster mode? | Как создать автоматические сайты, приложения/игры, ботов, расширения?</title>

	
		
		<meta name="description" content="Здравствуйте. В режиме работы в cluster mode есть много плюсов, такие как распределение инстансов по кол-ву доступных ядер, сниженная нагрузка на процессор...">
		<meta property="og:description" content="Здравствуйте. В режиме работы в cluster mode есть много плюсов, такие как распределение инстансов по кол-ву доступных ядер, сниженная нагрузка на процессор (многоядерный), в следствии чего лучшая скорость работы сайта и уменьшенное время отдачи контента. (показания замерялись в keymetrix)...">
		<meta property="twitter:description" content="Здравствуйте. В режиме работы в cluster mode есть много плюсов, такие как распределение инстансов по кол-ву доступных ядер, сниженная нагрузка на процессор (многоядерный), в следствии чего лучшая...">
	
	
		<meta property="og:url" content="https://enota.club/threads/rezhim-raboty-sajta-fork-mode-ili-cluster-mode.105/">
	
		<link rel="canonical" href="https://enota.club/threads/rezhim-raboty-sajta-fork-mode-ili-cluster-mode.105/">
	

	
		
	
	
	<meta property="og:site_name" content="Как создать автоматические сайты, приложения/игры, ботов, расширения?">


	
	
		
	
	
	
		<meta property="og:title" content="Режим работы сайта. Fork mode или cluster mode?">
		<meta property="twitter:title" content="Режим работы сайта. Fork mode или cluster mode?">
	


	
	
	

	
		<meta name="theme-color" content="#272F38">
	

	
	
	

	

	<link rel="stylesheet" href="../../styles/2.css">

	
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	
	<link rel="stylesheet" href="../../styles/9.css">

	
		<script src="../../js/xf/preamble-compiled.js"></script>
	


	
		<link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32">
	
	
	
</head>
<body data-template="thread_view">

<div class="p-pageWrapper" id="top">



<header class="p-header" id="header">
	<div class="p-header-inner">
		<div class="p-header-content">

			<div class="p-header-logo p-header-logo--image">
				<a href="../../index.html">
					<img src="../../styles/default/img/logo.png" alt="Как создать автоматические сайты, приложения/игры, ботов, расширения?" srcset="../../styles/default/img/logo.png 2x">
				</a>
			</div>

			
		</div>
	</div>
</header>





	
	<nav class="p-nav">
		<div class="p-nav-inner">
			<a class="p-nav-menuTrigger" data-xf-click="off-canvas" data-menu=".js-headerOffCanvasMenu" role="button" tabindex="0">
				<i aria-hidden="true"></i>
				<span class="p-nav-menuText">Меню</span>
			</a>

			<div class="p-nav-smallLogo">
				<a href="../../index.html">
					<img src="../../styles/default/img/logo.png" alt="Как создать автоматические сайты, приложения/игры, ботов, расширения?" srcset="../../styles/default/img/logo.png 2x">
				</a>
			</div>

			<div class="p-nav-scroller hScroller" data-xf-init="h-scroller">
				<div class="hScroller-scroll">
					<ul class="p-nav-list js-offCanvasNavSource">
					
					</ul>
				</div>
			</div>

			<div class="p-nav-opposite">
				<div class="p-navgroup p-account p-navgroup--guest">
					
						<a href="../../login/index.html" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--logIn" rel="nofollow" data-xf-click="overlay">
							<span class="p-navgroup-linkText">Вход</span>
						</a>
						
							<a href="../../register/index.html" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--register" rel="nofollow" data-xf-click="overlay">
								<span class="p-navgroup-linkText">Регистрация</span>
							</a>
						
					
				</div>

				<div class="p-navgroup p-discovery">
					<a href="../../whats-new/index.html" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--whatsnew" title="Что нового?">
						<i aria-hidden="true"></i>
						<span class="p-navgroup-linkText">Что нового?</span>
					</a>

					
						<a href="../../search/index.html" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--search" data-xf-click="menu" data-xf-key="/" aria-label="Поиск" aria-expanded="false" aria-haspopup="true" title="Поиск">
							<i aria-hidden="true"></i>
							<span class="p-navgroup-linkText">Поиск</span>
						</a>
						<div class="menu menu--structural menu--wide" data-menu="menu" aria-hidden="true">
							<form action="/search/search" method="post" class="menu-content" data-xf-init="quick-search">

								<h3 class="menu-header">Поиск</h3>
								
								<div class="menu-row">
									
										<div class="inputGroup inputGroup--joined">
											<input type="text" class="input" name="keywords" placeholder="Поиск..." aria-label="Поиск" data-menu-autofocus="true">
											
			<select name="constraints" class="js-quickSearch-constraint input" aria-label="Search within">
				<option value="">Везде</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;}">Темы</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;nodes&quot;:[23],&quot;child_nodes&quot;:1}}">Этот форум</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;thread&quot;:105}}">Эта тема</option>

			</select>
		
										</div>
										
								</div>

								
								<div class="menu-row">
									<label class="iconic iconic--checkbox iconic--labelled"><input type="checkbox" name="c[title_only]" value="1"><i aria-hidden="true"></i>Искать только в заголовках</label>

								</div>
								
								<div class="menu-row">
									<div class="inputGroup">
										<span class="inputGroup-text">От:</span>
										<input class="input" name="c[users]" data-xf-init="auto-complete" placeholder="Пользователь">
									</div>
								</div>
								<div class="menu-footer">
									<span class="menu-footer-controls">
										<button type="submit" class="button--primary button button--icon button--icon--search"><span class="button-text">Поиск</span></button>
										<a href="../../search/index.html" class="button" rel="nofollow"><span class="button-text">Расширенный поиск...</span></a>
									</span>
								</div>

								<input type="hidden" name="_xfToken" value="1664151844,7d35c848f9f5d1f4132b8741e835a9f4">
							</form>
						</div>
					
				</div>
			</div>
		</div>
	</nav>

	
	
		<div class="p-sectionLinks p-sectionLinks--empty"></div>
	



<div class="offCanvasMenu offCanvasMenu--nav js-headerOffCanvasMenu" data-menu="menu" aria-hidden="true" data-ocm-builder="navigation">
	<div class="offCanvasMenu-backdrop" data-menu-close="true"></div>
	<div class="offCanvasMenu-content">
		<div class="offCanvasMenu-header">
			Меню
			<a class="offCanvasMenu-closer" data-menu-close="true" role="button" tabindex="0" aria-label="Закрыть"></a>
		</div>
		
			<div class="p-offCanvasRegisterLink">
				<div class="offCanvasMenu-linkHolder">
					<a href="../../login/index.html" class="offCanvasMenu-link" rel="nofollow" data-xf-click="overlay" data-menu-close="true">
						Вход
					</a>
				</div>
				<hr class="offCanvasMenu-separator">
				
					<div class="offCanvasMenu-linkHolder">
						<a href="../../register/index.html" class="offCanvasMenu-link" rel="nofollow" data-xf-click="overlay" data-menu-close="true">
							Регистрация
						</a>
					</div>
					<hr class="offCanvasMenu-separator">
				
			</div>
		
		<div class="js-offCanvasNavTarget"></div>
	</div>
</div>

<div class="p-body">
	<div class="p-body-inner">
		<!--XF:EXTRA_OUTPUT-->

		

		

		
		
	
		<ul class="p-breadcrumbs " itemscope="" itemtype="https://schema.org/BreadcrumbList">
		

			
			

			
			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../index.html#forum-vebmasterov-i-razrabotchikov.11" itemprop="item">
			<span itemprop="name">Форум вебмастеров и разработчиков</span>
		</a>
	</li>

			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../categories/cinemapress.19/index.html" itemprop="item">
			<span itemprop="name">CinemaPress</span>
		</a>
	</li>

			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../forums/help/index.html" itemprop="item">
			<span itemprop="name">Помощь (Архив)</span>
		</a>
	</li>

			

		
		</ul>
	

		

		
	<noscript><div class="blockMessage blockMessage--important blockMessage--iconic u-noJsOnly">JavaScript отключён. Чтобы полноценно использовать наш сайт, включите JavaScript в своём браузере.</div></noscript>

		
	<!--[if lt IE 9]><div class="blockMessage blockMessage&#45;&#45;important blockMessage&#45;&#45;iconic">Вы используете устаревший браузер. Этот и другие сайты могут отображаться в нём некорректно.<br />Вам необходимо обновить браузер или попробовать использовать <a href="https://www.google.com/chrome/browser/" target="_blank">другой</a>.</div><![endif]-->


		
			<div class="p-body-header">
			
				
					<div class="p-title ">
					
						
							<h1 class="p-title-value">Режим работы сайта. Fork mode или cluster mode?</h1>
						
						
					
					</div>
				

				
					<div class="p-description">
	<ul class="listInline listInline--bullet">
		<li>
			<i class="fa fa-user" aria-hidden="true" title="Автор темы"></i>
			<span class="u-srOnly">Автор темы</span>

			<a href="../../members/mainc0de.15/index.html" class="username  u-concealed" dir="auto" data-user-id="15" data-xf-init="member-tooltip">Mainc0de</a>
		</li>
		<li>
			<i class="fa fa-clock-o" aria-hidden="true" title="Дата начала"></i>
			<span class="u-srOnly">Дата начала</span>

			<a href="index.html" class="u-concealed"><time class="u-dt" dir="auto" datetime="2018-02-26T17:26:34+0300" data-time="1519655194" data-date-string="26 Фев 2018" data-time-string="17:26" title="26 Фев 2018 в 17:26">26 Фев 2018</time></a>
		</li>
		
	</ul>
</div>
				
			
			</div>
		

		<div class="p-body-main  ">
			

			<div class="p-body-content">
				
				<div class="p-body-pageContent">








	
	
	
		
	
	
	


	
	
	
		
	
	
	


	
	
		
	
	
	


	
	









	

	
		
	







	
		
		
	






<div class="block block--messages" data-xf-init="" data-type="post" data-href="/inline-mod/">

	
	


	<div class="block-outer"></div>

	<div class="block-outer js-threadStatusField"></div>

	<div class="block-container lbContainer" data-xf-init="lightbox select-to-quote" data-message-selector=".js-post" data-lb-id="thread-105" data-lb-universal="1">

		<div class="block-body js-replyNewMessageContainer">
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Mainc0de" data-content="post-575" id="js-post-575">

		<span class="u-anchorTarget" id="post-575"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/mainc0de.15/index.html" class="username " dir="auto" data-user-id="15" data-xf-init="member-tooltip" itemprop="name">Mainc0de</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/mainc0de.15/index.html" class="avatar avatar--l avatar--default avatar--default--dynamic" data-user-id="15" data-xf-init="member-tooltip" style="background-color: #145233; color: #47d18c">
			<span class="avatar-u15-l">M</span> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--gray message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Енот</strong><span class="userBanner-after"></span></div>
<div class="userBanner userBanner userBanner--silver message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Новичо́к, через «о́»</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-26T17:26:34+0300" data-time="1519655194" data-date-string="26 Фев 2018" data-time-string="17:26" title="26 Фев 2018 в 17:26">26 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#1</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>17 Янв 2018</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>100</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 9" style="background-color: #4CAF50; width: 100%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 0" style="background-color: #B0BEC5; width: 0%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 0" style="background-color: #F44336; width: 0%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-26T17:26:34+0300" data-time="1519655194" data-date-string="26 Фев 2018" data-time-string="17:26" title="26 Фев 2018 в 17:26">26 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#1</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-575" data-lb-caption-desc="Mainc0de · 26 Фев 2018 в 17:26">

							
								

	

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper">Здравствуйте. В режиме работы в <code class="bbCodeInline">cluster mode</code> есть много плюсов, такие как распределение инстансов по кол-ву доступных ядер, сниженная нагрузка на процессор (многоядерный), в следствии чего лучшая скорость работы сайта и уменьшенное время отдачи контента. (показания замерялись в keymetrix). Однако, в данный момент есть существенный недостаток в работе в этом режиме. А именно: невозможность сохранения данных и изменений в админке с первого раза. Т.е. необходимо несколько раз нажимать кнопку "сохранить" и несколько раз чистить кеш, чтобы инстансы обновились и изменения наконец, записались. В режиме работы <code class="bbCodeInline">fork mode</code> изменения сохраняются сразу, но задействован только один поток, в результате чего нагрузка на 4-х ядерный процессор достигает 99+ процентов, сайт тупит, в keymetrix полно ошибок. Существует ли решение для работы в режиме кластера, при котором можно нормально сохранять изменения для сайта? Если возможно, хотя бы скиньте ссылки, где я могу про это почитать? Спасибо.</div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							
								

	

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Alisa" data-content="post-577" id="js-post-577">

		<span class="u-anchorTarget" id="post-577"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/alisa.2/index.html" class="username " dir="auto" data-user-id="2" data-xf-init="member-tooltip" itemprop="name">Alisa</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/alisa.2/index.html" class="avatar avatar--l" data-user-id="2" data-xf-init="member-tooltip">
			<img src="../../data/avatars/l/0/2.jpg" srcset="../../data/avatars/h/0/2.jpg 2x" alt="Alisa" class="avatar-u2-l" itemprop="image"> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--red message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Off</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-26T20:03:43+0300" data-time="1519664623" data-date-string="26 Фев 2018" data-time-string="20:03" title="26 Фев 2018 в 20:03">26 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#2</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>15 Дек 2017</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>5,067</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 934" style="background-color: #4CAF50; width: 98.212407991588%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 8" style="background-color: #B0BEC5; width: 0.84121976866456%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 9" style="background-color: #F44336; width: 0.94637223974763%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-26T20:03:43+0300" data-time="1519664623" data-date-string="26 Фев 2018" data-time-string="20:03" title="26 Фев 2018 в 20:03">26 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#2</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-577" data-lb-caption-desc="Alisa · 26 Фев 2018 в 20:03">

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper">Работа системы в <code class="bbCodeInline">cluster mode</code> была протестирована и отлично работала на тестовом сервере. Однако начали поступать жалобы на несохранения данных и функция была по умолчанию урезана до 1 инстанса. Данная проблема скорее всего зависит от версии Debian сервера и размера оперативной памяти. <br>
Запустите сайт в 4 инстанса <code class="bbCodeInline">"instances": "4"</code>, в файле <code class="bbCodeInline">process.json</code>.<br>
Сделайте перезагрузку: <code class="bbCodeInline">pm2 restart all</code><br>
<code class="bbCodeInline">pm2 list</code> покажет все 4 ядра.<br>
<code class="bbCodeInline">pm2 logs</code>, запустите логирование и сделайте сохранение в админ-панели.<br>
В логах должна быть показана перезагрузка 3-х ядер, 4-е ядро на котором происходило изменение, примется сразу без перезагрузки.</div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Mainc0de" data-content="post-584" id="js-post-584">

		<span class="u-anchorTarget" id="post-584"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/mainc0de.15/index.html" class="username " dir="auto" data-user-id="15" data-xf-init="member-tooltip" itemprop="name">Mainc0de</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/mainc0de.15/index.html" class="avatar avatar--l avatar--default avatar--default--dynamic" data-user-id="15" data-xf-init="member-tooltip" style="background-color: #145233; color: #47d18c">
			<span class="avatar-u15-l">M</span> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--gray message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Енот</strong><span class="userBanner-after"></span></div>
<div class="userBanner userBanner userBanner--silver message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Новичо́к, через «о́»</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T11:20:15+0300" data-time="1519719615" data-date-string="27 Фев 2018" data-time-string="11:20" title="27 Фев 2018 в 11:20">27 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#3</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>17 Янв 2018</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>100</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 9" style="background-color: #4CAF50; width: 100%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 0" style="background-color: #B0BEC5; width: 0%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 0" style="background-color: #F44336; width: 0%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T11:20:15+0300" data-time="1519719615" data-date-string="27 Фев 2018" data-time-string="11:20" title="27 Фев 2018 в 11:20">27 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#3</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-584" data-lb-caption-desc="Mainc0de · 27 Фев 2018 в 11:20">

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper"><div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-577">Alisa написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			Работа системы в <code class="bbCodeInline">cluster mode</code> была протестирована и отлично работала на тестовом сервере. Однако начали поступать жалобы на несохранения данных и функция была по умолчанию урезана до 1 инстанса. Данная проблема скорее всего зависит от версии Debian сервера и размера оперативной памяти.<br>
Запустите сайт в 4 инстанса <code class="bbCodeInline">"instances": "4"</code>, в файле <code class="bbCodeInline">process.json</code>.<br>
Сделайте перезагрузку: <code class="bbCodeInline">pm2 restart all</code><br>
<code class="bbCodeInline">pm2 list</code> покажет все 4 ядра.<br>
<code class="bbCodeInline">pm2 logs</code>, запустите логирование и сделайте сохранение в админ-панели.<br>
В логах должна быть показана перезагрузка 3-х ядер, 4-е ядро на котором происходило изменение, примется сразу без перезагрузки.
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div>У меня по-умолчанию и так 4 инстанса. Вернее, все доступные ядра процессора используются (в process.json instances=0). Все ядра используются и это весьма хорошо сказывается на производительности. Если б сохранения пофиксить было бы отлично. Может есть какой-нибудь временный костыль, чтобы не уменьшая кол-во инстансов сохраняться?</div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Alisa" data-content="post-586" id="js-post-586">

		<span class="u-anchorTarget" id="post-586"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/alisa.2/index.html" class="username " dir="auto" data-user-id="2" data-xf-init="member-tooltip" itemprop="name">Alisa</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/alisa.2/index.html" class="avatar avatar--l" data-user-id="2" data-xf-init="member-tooltip">
			<img src="../../data/avatars/l/0/2.jpg" srcset="../../data/avatars/h/0/2.jpg 2x" alt="Alisa" class="avatar-u2-l" itemprop="image"> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--red message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Off</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T11:58:27+0300" data-time="1519721907" data-date-string="27 Фев 2018" data-time-string="11:58" title="27 Фев 2018 в 11:58">27 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#4</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>15 Дек 2017</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>5,067</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 934" style="background-color: #4CAF50; width: 98.212407991588%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 8" style="background-color: #B0BEC5; width: 0.84121976866456%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 9" style="background-color: #F44336; width: 0.94637223974763%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T11:58:27+0300" data-time="1519721907" data-date-string="27 Фев 2018" data-time-string="11:58" title="27 Фев 2018 в 11:58">27 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#4</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-586" data-lb-caption-desc="Alisa · 27 Фев 2018 в 11:58">

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper"><div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-584">Mainc0de написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			Может есть какой-нибудь временный костыль, чтобы не уменьшая кол-во инстансов сохраняться?
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div>Нужно посмотреть, перезагрузка ядер происходит или нет?<br>


<div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-577">Alisa написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			<code class="bbCodeInline">pm2 logs</code>, запустите логирование и сделайте сохранение в админ-панели.<br>
В логах должна быть показана перезагрузка 3-х ядер, 4-е ядро на котором происходило изменение, примется сразу без перезагрузки.
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div></div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Mainc0de" data-content="post-596" id="js-post-596">

		<span class="u-anchorTarget" id="post-596"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/mainc0de.15/index.html" class="username " dir="auto" data-user-id="15" data-xf-init="member-tooltip" itemprop="name">Mainc0de</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/mainc0de.15/index.html" class="avatar avatar--l avatar--default avatar--default--dynamic" data-user-id="15" data-xf-init="member-tooltip" style="background-color: #145233; color: #47d18c">
			<span class="avatar-u15-l">M</span> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--gray message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Енот</strong><span class="userBanner-after"></span></div>
<div class="userBanner userBanner userBanner--silver message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Новичо́к, через «о́»</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T19:02:10+0300" data-time="1519747330" data-date-string="27 Фев 2018" data-time-string="19:02" title="27 Фев 2018 в 19:02">27 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#5</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>17 Янв 2018</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>100</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 9" style="background-color: #4CAF50; width: 100%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 0" style="background-color: #B0BEC5; width: 0%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 0" style="background-color: #F44336; width: 0%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T19:02:10+0300" data-time="1519747330" data-date-string="27 Фев 2018" data-time-string="19:02" title="27 Фев 2018 в 19:02">27 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#5</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-596" data-lb-caption-desc="Mainc0de · 27 Фев 2018 в 19:02">

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper"><div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-586">Alisa написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			Нужно посмотреть, перезагрузка ядер происходит или нет?
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div>Вот лог сразу после нажатия на кнопку "сохранить".<br>

	
	


<div class="bbCodeBlock bbCodeBlock--screenLimited bbCodeBlock--code">
	<div class="bbCodeBlock-title">
		Код:
	</div>
	<div class="bbCodeBlock-content">
		<pre class="bbCodeCode" dir="ltr" data-xf-init="code-block" data-lang=""><code>PM2        | Starting execution sequence in -cluster mode- for app name:mysite.com id:5
PM2        | App name:mysite.com id:5 online
PM2        | -reload- New worker listening
PM2        | Stopping app:mysite.com id:_old_5
PM2        | App name:mysite.com id:_old_5 disconnected
PM2        | App [mysite.com] with id [_old_5] and pid [9895], exited with code [0] via signal [SIGINT]
PM2        | pid=9895 msg=process killed
PM2        | Starting execution sequence in -cluster mode- for app name:mysite.com id:6
PM2        | App name:mysite.com id:6 online
PM2        | -reload- New worker listening
PM2        | Stopping app:mysite.com id:_old_6
PM2        | App name:mysite.com id:_old_6 disconnected
PM2        | App [mysite.com] with id [_old_6] and pid [9924], exited with code [0] via signal [SIGINT]
PM2        | pid=9924 msg=process killed
PM2        | Starting execution sequence in -cluster mode- for app name:mysite.com id:7
PM2        | App name:mysite.com id:7 online
PM2        | -reload- New worker listening
PM2        | Stopping app:mysite.com id:_old_7
PM2        | App name:mysite.com id:_old_7 disconnected
PM2        | App [mysite.com] with id [_old_7] and pid [8410], exited with code [0] via signal [SIGINT]
PM2        | pid=8410 msg=process killed</code></pre>
	</div>
</div>И еще: в логах постоянно эта ошибка, что на старом хостинге, что на новом. Ошибка была всегда. Это нормально?<br>

	
	


<div class="bbCodeBlock bbCodeBlock--screenLimited bbCodeBlock--code">
	<div class="bbCodeBlock-title">
		Код:
	</div>
	<div class="bbCodeBlock-content">
		<pre class="bbCodeCode" dir="ltr" data-xf-init="code-block" data-lang=""><code>/home/mysite.com/log/out-6.log last 15 lines:
6|mysite |     at emitNone (events.js:106:13)
6|mysite |     at Socket.emit (events.js:208:7)
6|mysite |     at Socket._onTimeout (net.js:407:8)
6|mysite |     at ontimeout (timers.js:475:11) code: 'ESOCKETTIMEDOUT', connect: false }
6|mysite | { Error: ESOCKETTIMEDOUT
6|mysite |     at ClientRequest.&lt;anonymous&gt; (/home/mysite.com/node_modules/request/request.js:813:19)
6|mysite |     at Object.onceWrapper (events.js:313:30)
6|mysite |     at emitNone (events.js:106:13)
6|mysite |     at ClientRequest.emit (events.js:208:7)
6|mysite |     at Socket.emitTimeout (_http_client.js:708:34)
6|mysite |     at Object.onceWrapper (events.js:313:30)
6|mysite |     at emitNone (events.js:106:13)
6|mysite |     at Socket.emit (events.js:208:7)
6|mysite |     at Socket._onTimeout (net.js:407:8)
6|mysite |     at ontimeout (timers.js:475:11) code: 'ESOCKETTIMEDOUT', connect: false }</code></pre>
	</div>
</div></div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
				
					
	
	
	<article class="message message--post js-post js-inlineModContainer  " data-author="Alisa" data-content="post-598" id="js-post-598">

		<span class="u-anchorTarget" id="post-598"></span>

		<div class="message-inner">
			<div class="message-cell message-cell--user">
				
				
				

	<section itemscope="" itemtype="https://schema.org/Person" class="message-user">
		<div class="message-userDetails">
			<h4 class="message-name"><a href="../../members/alisa.2/index.html" class="username " dir="auto" data-user-id="2" data-xf-init="member-tooltip" itemprop="name">Alisa</a></h4>
		</div>
		<div class="message-avatar ">
			<div class="message-avatar-wrapper">
				<a href="../../members/alisa.2/index.html" class="avatar avatar--l" data-user-id="2" data-xf-init="member-tooltip">
			<img src="../../data/avatars/l/0/2.jpg" srcset="../../data/avatars/h/0/2.jpg 2x" alt="Alisa" class="avatar-u2-l" itemprop="image"> 
		</a>
				
			</div>
		</div>
		<div class="message-userDetails">
			
			<div class="userBanner userBanner userBanner--red message-userBanner" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Off</strong><span class="userBanner-after"></span></div>
			<div class="message-date"><a href="index.html" class="u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T19:17:39+0300" data-time="1519748259" data-date-string="27 Фев 2018" data-time-string="19:17" title="27 Фев 2018 в 19:17">27 Фев 2018</time></a></div>
		</div>
		<div class="message-permalink"><a href="index.html" class="u-concealed" rel="nofollow">#6</a></div>
		
			
			
				<div class="message-userExtras">
				


					
						<dl class="pairs pairs--justified">
							<dt>Регистрация</dt>
							<dd>15 Дек 2017</dd>
						</dl>
					
					
						<dl class="pairs pairs--justified">
							<dt>Сообщения</dt>
							<dd>5,067</dd>
						</dl>
					
					<!--
					
					-->
					
					
					
					
					
						

	

						
					
				

	
	
		
	
		
			<div class="react_total_bar ">
				
					
					
						
						
						<div class="react_bar_segment react_bar_positive Tooltip" title="Позитивные реакции: 934" style="background-color: #4CAF50; width: 98.212407991588%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_neutral Tooltip" title="Нейтральные реакции: 8" style="background-color: #B0BEC5; width: 0.84121976866456%" data-xf-init="tooltip"></div>
					
						
						
						<div class="react_bar_segment react_bar_negative Tooltip" title="Негативные реакции: 9" style="background-color: #F44336; width: 0.94637223974763%" data-xf-init="tooltip"></div>
					
				
			</div>
		
	

		



				</div>
			
		
		<span class="message-userArrow"></span>
	</section>

			</div>
			<div class="message-cell message-cell--main">
				<div class="message-main js-quickEditTarget">

					<header class="message-attribution">
						<a href="index.html" class="message-attribution-main u-concealed" rel="nofollow"><time class="u-dt" dir="auto" datetime="2018-02-27T19:17:39+0300" data-time="1519748259" data-date-string="27 Фев 2018" data-time-string="19:17" title="27 Фев 2018 в 19:17">27 Фев 2018</time></a>
						<div class="message-attribution-opposite">
							
							<a href="index.html" class="u-concealed" rel="nofollow">#6</a>
						</div>
					</header>

					<div class="message-content js-messageContent">

						
						
						

						<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-598" data-lb-caption-desc="Alisa · 27 Фев 2018 в 19:17">

							

							<article class="message-body js-selectToQuote">
								
								<div class="bbWrapper"><div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-596">Mainc0de написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			Вот лог сразу после нажатия на кнопку "сохранить".
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div>Все 3 ядра видно перезагружаются. Какие именно настройки не применяются? Кэш очищается?<br>


<div class="bbCodeBlock bbCodeBlock--expandable bbCodeBlock--quote">
	
		<div class="bbCodeBlock-title">
			
				<a href="index.html" class="bbCodeBlock-sourceJump" data-xf-click="attribution" data-content-selector="#post-596">Mainc0de написал(а):</a>
			
		</div>
	
	<div class="bbCodeBlock-content">
		<div class="bbCodeBlock-expandContent">
			И еще: в логах постоянно эта ошибка, что на старом хостинге, что на новом. Ошибка была всегда. Это нормально?
		</div>
		<div class="bbCodeBlock-expandLink"><a>Нажмите для раскрытия...</a></div>
	</div>
</div>Это ошибка скорее всего API комментариев, там стоит лимит бесплатных запросов и сайт упирается в него.</div>
								<div class="js-selectToQuoteEnd">&nbsp;</div>
								
							</article>

							

							
						</div>

						

						
	

					</div>

					<footer class="message-footer">
						
						
	
	

	

						
						

						<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
					</footer>
				</div>
			</div>
		</div>

		
	</article>

				
			
		</div>
	</div>

	
		<div class="block-outer block-outer--after">
			
				
				
				
					<div class="block-outer-opposite">
						
							<a href="../../login/index.html" class="button--link button" data-xf-click="overlay"><span class="button-text">
								Для ответа, нужно войти или зарегистрироваться.
							</span></a>
						
					</div>
				
			
		</div>
	

	
	

</div>





<div class="blockMessage blockMessage--none">
	
	

</div>


	



</div>
				
			</div>

			
		</div>

		
		
	
		<ul class="p-breadcrumbs p-breadcrumbs--bottom" itemscope="" itemtype="https://schema.org/BreadcrumbList">
		

			
			

			
			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../index.html#forum-vebmasterov-i-razrabotchikov.11" itemprop="item">
			<span itemprop="name">Форум вебмастеров и разработчиков</span>
		</a>
	</li>

			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../categories/cinemapress.19/index.html" itemprop="item">
			<span itemprop="name">CinemaPress</span>
		</a>
	</li>

			
				
	<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
		<a href="../../forums/help/index.html" itemprop="item">
			<span itemprop="name">Помощь (Архив)</span>
		</a>
	</li>

			

		
		</ul>
	

		
	</div>
</div>

<footer class="p-footer" id="footer">
	<div class="p-footer-inner">

		<div class="p-footer-row">
			
				<div class="p-footer-row-main">
					<ul class="p-footer-linkList">
					
						
						
							<li><a href="../../misc/language/index.html" data-xf-click="overlay" data-xf-init="tooltip" title="Выбор языка" rel="nofollow">
								<i class="fa fa-globe" aria-hidden="true"></i> Russian (RU)</a></li>
						
					
					</ul>
				</div>
			
			<div class="p-footer-row-opposite">
				<ul class="p-footer-linkList">
					

					
						<li><a href="../../help/terms/index.html">Условия и правила</a></li>
					

					

					
						<li><a href="../../help/index.html">Помощь</a></li>
					

					
						<li><a href="../../index.html">Главная</a></li>
					

					<li><a href="../../forums/-/index.rss" target="_blank" class="p-footer-rssLink" title="RSS"><span aria-hidden="true"><i class="fa fa-rss"></i></span></a></li>
				</ul>
			</div>
		</div>

		
			<div class="p-footer-copyright">
			
				
				<div align="left" style="color:#ccc">Forum software by XenForo™ ©2010-2021 XenForo Ltd. | Локализация от <a href="../../link.html#https://XenForo.Info" target="_blank">XenForo.Info</a></div>
			
			</div>
		

		
	</div>
</footer>

</div> <!-- closing p-pageWrapper -->

<div class="u-bottomFixer js-bottomFixTarget">
	
</div>


	<div class="u-scrollButtons js-scrollButtons" data-trigger-type="up">
		<a href="#top" class="button--scroll button" data-xf-click="scroll-to"><span class="button-text"><i class="fa fa-arrow-up"></i></span></a>
		
	</div>



	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/js/vendor/jquery/jquery-3.2.1.min.js?_v=1bd6f38b"><\/script>')</script>
	<script src="../../js/vendor/vendor-compiled.js"></script>
	<script src="../../js/xf/core-compiled.js"></script>
	<script src="../../js/xf/lightbox-compiled.js"></script>
<script src="../../js/themehouse/reactions/react.js"></script>
<script src="../../js/xf/code_block-compiled.js"></script>

	<script>
		jQuery.extend(true, XF.config, {
			userId: 0,
			url: {
				fullBase: 'https://enota.club/',
				basePath: '/',
				css: '/css.php?css=__SENTINEL__&s=4&l=2&d=1664071341',
				keepAlive: '/login/keep-alive'
			},
			cookie: {
				path: '/',
				domain: '',
				prefix: 'xf_'
			},
			csrf: '1664151844,7d35c848f9f5d1f4132b8741e835a9f4',
			js: {"\/js\/xf\/lightbox-compiled.js?_v=1bd6f38b":true,"\/js\/themehouse\/reactions\/react.js?_v=1bd6f38b":true,"\/js\/xf\/code_block-compiled.js?_v=1bd6f38b":true},
			css: {"public:bb_code.less":true,"public:lightbox.less":true,"public:message.less":true,"public:th_reactions.less":true,"public:extra.less":true},
			time: {
				now: 1664151844,
				today: 1664139600,
				todayDow: 1
			},
			borderSizeFeature: '3px',
			enableRtnProtect: true,
			enableFormSubmitSticky: true,
			uploadMaxFilesize: 2097152,
			visitorCounts: {
				conversations_unread: '0',
				alerts_unread: '0',
				total_unread: '0',
				title_count: true,
				icon_indicator: true
			},
			jsState: {}
		});

		jQuery.extend(XF.phrases, {
			date_x_at_time_y: "{date} в {time}",
			day_x_at_time_y:  "{day} в {time}",
			yesterday_at_x:   "Вчера в {time}",
			x_minutes_ago:    "{minutes} мин. назад",
			one_minute_ago:   "1 минуту назад",
			a_moment_ago:     "Только что",
			today_at_x:       "Сегодня в {time}",
			in_a_moment:      "In a moment",
			in_a_minute:      "Менее минуты назад",
			in_x_minutes:     "In {minutes} minutes",
			later_today_at_x: "Сегодня позже в {time}",
			tomorrow_at_x:    "Завтра в {time}",

			day0: "Воскресенье",
			day1: "Понедельник",
			day2: "Вторник",
			day3: "Среда",
			day4: "Четверг",
			day5: "Пятница",
			day6: "Суббота",

			dayShort0: "Вос",
			dayShort1: "Пон",
			dayShort2: "Вто",
			dayShort3: "Сре",
			dayShort4: "Чет",
			dayShort5: "Пят",
			dayShort6: "Суб",

			month0: "Январь",
			month1: "Февраль",
			month2: "Март",
			month3: "Апрель",
			month4: "Май",
			month5: "Июнь",
			month6: "Июль",
			month7: "Август",
			month8: "Сентябрь",
			month9: "Октябрь",
			month10: "Ноябрь",
			month11: "Декабрь",

			active_user_changed_reload_page: "Ваша сессия истекла. Перезагрузите страницу.",
			server_did_not_respond_in_time_try_again: "Сервер не ответил вовремя. Пожалуйста, попробуйте снова.",
			oops_we_ran_into_some_problems: "Упс! Мы столкнулись с некоторыми проблемами.",
			oops_we_ran_into_some_problems_more_details_console: "Упс! Мы столкнулись с некоторыми проблемами. Пожалуйста, попробуйте позже. Более детальную информацию об ошибке Вы можете посмотреть в консоли браузера.",
			file_too_large_to_upload: "Файл слишком большой для загрузки.",
			files_being_uploaded_are_you_sure: "Файлы все ещё загружаются. Вы действительно хотите отправить эту форму?",
			close: "Закрыть",

			showing_x_of_y_items: "Показано {count} из {total} элементов",
			showing_all_items: "Показаны все элементы",
			no_items_to_display: "Нет элементов для отображения"
		});
	</script>

	<form style="display:none" hidden="hidden">
		<input type="text" name="_xfClientLoadTime" value="" id="_xfClientLoadTime" tabindex="-1">
	</form>

	



	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "DiscussionForumPosting",
		"@id": "https:\/\/enota.club\/threads\/rezhim-raboty-sajta-fork-mode-ili-cluster-mode.105\/",
		"headline": "Режим работы сайта. Fork mode или cluster mode?",
		"articleBody": "Здравствуйте. В режиме работы в cluster mode есть много плюсов, такие как распределение инстансов по кол-ву доступных ядер, сниженная нагрузка на процессор (многоядерный), в следствии чего лучшая скорость работы сайта и уменьшенное время отдачи контента. (показания замерялись в keymetrix). Однако, в данный момент есть существенный недостаток в работе в этом режиме. А именно: невозможность сохранения данных и изменений в админке с первого раза. Т.е. необходимо несколько раз нажимать кнопку \"сохранить\" и несколько раз чистить кеш, чтобы инстансы обновились и изменения наконец, записались. В режиме работы fork mode изменения сохраняются сразу, но задействован только один поток, в результате чего нагрузка на 4-х ядерный процессор достигает 99+ процентов, сайт тупит, в keymetrix полно ошибок. Существует ли решение для работы в режиме кластера, при котором можно нормально сохранять изменения для сайта? Если возможно, хотя бы скиньте ссылки, где я могу про это почитать? Спасибо.",
		"articleSection": "Помощь (Архив)",
		"author": {
			"@type": "Person",
			"name": "Mainc0de"
		},
		"datePublished": "2018-02-26",
		"dateModified": "2018-02-27",
		
		"image": "",
		
		"interactionStatistic": {
			"@type": "InteractionCounter",
			"interactionType": "https://schema.org/ReplyAction",
			"userInteractionCount": 5
		}
	}
	</script>













</body></html>